!function(e){var t={};function r(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){window.onload=function(){new r};class r{constructor(){this.divGame=document.querySelector("#tetris"),this.currentScores=0,this.maxScores=0,this.currentPeace=this.newShape(),this.nextPeace=this.newShape(),this.currentPeaceX=3,this.currentPeaceY=0,this.tableBoard=new Array(20),this.currentScoresP=null,this.maxScoresP=null,this.gameRunTimer=null,this.createStartButton(),this.board=new Array(20);for(let e=0;e<20;++e)this.board[e]=new Array(10)}createStartButton(){let e=document.createElement("button");e.id="startButton",e.innerText="Start Game";let t=this;e.onclick=function(){this.parentNode.removeChild(this),t.createGameFild(),t.run()},this.divGame.appendChild(e)}newShape(){switch(Math.round(6*Math.random())){case 0:return[[1,1,0],[0,1,1],[0,0,0]];case 1:return[[0,2,2],[2,2,0],[0,0,0]];case 2:return[[3,3,3],[0,0,3],[0,0,0]];case 3:return[[4,4,4],[4,0,0],[0,0,0]];case 4:return[[5,5],[5,5]];case 5:return[[6,6,6],[0,6,0],[0,0,0]];case 6:return[[7,7,7,7],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}}rotate(){let e=this.currentPeace.length,t=Array(e);for(let r=0;r<e;++r){t[r]=new Array(e);for(let a=0;a<e;++a)t[r][a]=this.currentPeace[r][a]}for(let r=0;r<e;++r)for(let a=0;a<e;++a)this.currentPeace[a][e-1-r]=t[r][a];let r=!0,a=0;for(;r;){for(let t=0;t<e;++t)0!==this.currentPeace[a][t]&&(r=!1);r&&++a}for(let t=0;t<e;++t){let r=0;for(;r+a!=e;)this.currentPeace[r][t]=this.currentPeace[r+a][t],++r;for(;r!=e;)this.currentPeace[r++][t]=0}for(r=!0,a=0;r;){for(let t=0;t<e;++t)0!==this.currentPeace[t][a]&&(r=!1);r&&++a}for(let t=0;t<e;++t){let r=0;for(;r+a!=e;)this.currentPeace[t][r]=this.currentPeace[t][r+a],++r;for(;r!=e;)this.currentPeace[t][r++]=0}this.checkPos()&&(++this.currentPeaceX,this.checkPos()&&(this.currentPeaceX-=2,this.checkPos()&&(++this.currentPeaceX,this.currentPeace=t))),this.render()}fixState(){let e=this.currentPeace.length,t=this.currentPeaceX,r=this.currentPeaceY;for(let a=0;a<e;++a)for(let s=0;s<e;++s)0!==this.currentPeace[a][s]&&t+s<this.board[0].length&&r+a<this.board.length&&(this.board[r+a][t+s]=this.currentPeace[a][s]);this.currentPeace=this.nextPeace,this.currentPeaceX=3,this.currentPeaceY=0,this.nextPeace=this.newShape(),this.checkPos()&&this.stop(),this.deleteLines()}checkPos(){let e=this.currentPeace.length,t=this.currentPeaceX,r=this.currentPeaceY;if(t<0)return!0;for(let a=0;a<e;++a)for(let s=0;s<e;++s){if(0!==this.currentPeace[a][s]&&(t+s>=this.board[0].length||r+a>=this.board.length))return!0;if(0!==this.currentPeace[a][s]&&0!==this.board[r+a][t+s])return!0}return!1}render(){for(let e=0;e<20;++e)for(let t=0;t<10;++t)switch(this.board[e][t]){case 1:this.tableBoard[e][t].classList.add("red");break;case 2:this.tableBoard[e][t].classList.add("blue");break;case 3:this.tableBoard[e][t].classList.add("green");break;case 4:this.tableBoard[e][t].classList.add("yellow");break;case 5:this.tableBoard[e][t].classList.add("orange");break;case 6:this.tableBoard[e][t].classList.add("pink");break;case 7:this.tableBoard[e][t].classList.add("lightblue");break;default:this.tableBoard[e][t].className="gameSquare"}let e=this.currentPeaceX,t=this.currentPeaceY,r=this.currentPeace.length;for(let a=0;a<r;++a)for(let s=0;s<r;++s)switch(this.currentPeace[a][s]){case 1:this.tableBoard[t+a][e+s].classList.add("red");break;case 2:this.tableBoard[t+a][e+s].classList.add("blue");break;case 3:this.tableBoard[t+a][e+s].classList.add("green");break;case 4:this.tableBoard[t+a][e+s].classList.add("yellow");break;case 5:this.tableBoard[t+a][e+s].classList.add("orange");break;case 6:this.tableBoard[t+a][e+s].classList.add("pink");break;case 7:this.tableBoard[t+a][e+s].classList.add("lightblue")}this.currentScoresP.innerText="Scores: "+this.currentScores,this.maxScoresP.innerText="Max Scores: "+this.maxScores}moveDown(){++this.currentPeaceY,this.checkPos()&&(--this.currentPeaceY,this.fixState()),this.render()}moveLeft(){--this.currentPeaceX,this.checkPos()&&++this.currentPeaceX,this.render()}moveRight(){++this.currentPeaceX,this.checkPos()&&--this.currentPeaceX,this.render()}moveDrop(){for(;!this.checkPos();)++this.currentPeaceY;--this.currentPeaceY,this.fixState(),this.render()}createGameFild(){for(let e=0;e<20;++e)for(let t=0;t<10;++t)this.board[e][t]=0;let e=document.querySelector("body"),t=document.createElement("table");t.id="gameBoard",this.currentScoresP=document.createElement("p"),this.maxScoresP=document.createElement("p"),this.currentScoresP.className=this.maxScoresP.className="scoresDisplays";let r=document.createElement("header");r.id="gameHeader",this.currentScoresP.innerText="Scores: 0",this.maxScoresP.innerText="Max Scores: "+this.maxScores,r.appendChild(this.currentScoresP),r.appendChild(this.maxScoresP),this.divGame.appendChild(r);for(let e=0;e<20;++e){let e=document.createElement("tr");e.className="gameRow";for(let t=0;t<10;++t){let t=document.createElement("td");t.className="gameSquare",e.appendChild(t)}t.appendChild(e)}this.divGame.appendChild(t),e.appendChild(this.divGame);let a=document.querySelector("#gameBoard").childNodes;for(let e=0;e<20;++e)this.tableBoard[e]=a[e].childNodes;let s=this;document.querySelector("body").onkeydown=function(e){switch(e.code){case"ArrowUp":s.rotate();break;case"ArrowDown":s.moveDown();break;case"ArrowLeft":s.moveLeft();break;case"ArrowRight":s.moveRight();break;case"Space":s.moveDrop()}}}run(){this.gameRunTimer=setInterval(()=>this.moveDown(),1e3)}stop(){clearInterval(this.gameRunTimer),this.currentScores>this.maxScores&&(this.maxScores=this.currentScores),this.currentScores=0;let e=this.divGame.childNodes;for(let t=e.length-1;t>=0;--t)this.divGame.removeChild(e[t]);this.createStartButton()}deleteLines(){let e=this.board.length,t=this.board[0].length,r=0;for(let a=0;a<e;++a){let e=0;for(;e<t&&0!==this.board[a][e];)++e;if(e==t){let e=a;for(;0!=e;){for(let r=0;r<t;++r)this.board[e][r]=this.board[e-1][r];--e}for(let e=0;e<t;++e)this.board[0][e]=0;++r}}0!=r&&(this.currentScores+=Math.pow(2,r))}}}]);